
> cofactor-club@0.1.0 build
> next build

ΓÜá Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of C:\Users\thies\Antigravity\Cofactor Club\package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * C:\Users\thies\Antigravity\Cofactor Club\cofactor-scout\package-lock.json

Γû▓ Next.js 16.1.6 (Turbopack)
- Experiments (use with caution):
  ┬╖ clientTraceMetadata
  ┬╖ serverActions

  Creating an optimized production build ...
Turbopack build encountered 3 warnings:
./cofactor-scout/node_modules/bullmq/dist/esm/classes
Package ioredis can't be external
The request ioredis/built/utils matches serverExternalPackages (or the default list).
The request could not be resolved by Node.js from the importing module. The way Node.js resolves modules is slightly different from the way Next.js resolves modules. Next.js was able to resolve it, while Node.js would not be able to.
Try to remove this package from serverExternalPackages.
Or update the import side to use a compatible request that can be resolved by Node.js.


./cofactor-scout/node_modules/bullmq/dist/esm/utils
Package ioredis can't be external
The request ioredis/built/utils matches serverExternalPackages (or the default list).
The request could not be resolved by Node.js from the importing module. The way Node.js resolves modules is slightly different from the way Next.js resolves modules. Next.js was able to resolve it, while Node.js would not be able to.
Try to remove this package from serverExternalPackages.
Or update the import side to use a compatible request that can be resolved by Node.js.


./cofactor-scout/components/features/members/MemberRow.tsx:158:51
Module not found: Can't resolve './actions'
  156 |         try {
  157 |             // dynamic import to avoid server action issues in client component if not passed as prop
> 158 |             const { toggleTrustedStatus } = await import('./actions')
      |                                                   ^^^^^^^^^^^^^^^^^^^
  159 |             await toggleTrustedStatus(memberId)
  160 |         } catch (error) {
  161 |             console.error(error)



Import traces:
  App Route:
    ./cofactor-scout/components/features/members/MemberRow.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  Server Component:
    ./cofactor-scout/components/features/members/MemberRow.tsx
    ./cofactor-scout/app/members/page.tsx

https://nextjs.org/docs/messages/module-not-found



> Build error occurred
Error: Turbopack build failed with 16 errors:
./cofactor-scout/app/wiki/[slug]/history/page.tsx:128:82
Module not found: Can't resolve '../../history-actions'
  126 |                                             // Re-importing inside server action scope or calling the imported one directly?
  127 |                                             // Importing at top level works for server components.
> 128 |                                             const { rollbackToRevision } = await import('../../history-actions')
      |                                                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  129 |                                             await rollbackToRevision(rev.id)
  130 |                                             redirect(`/wiki/${slug}`)
  131 |                                         }}>



Import trace:
  App Route:
    ./cofactor-scout/app/wiki/[slug]/history/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/admin/dashboard/page.tsx:7:1
Module not found: Can't resolve '../actions'
   5 | import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'
   6 | import Link from 'next/link'
>  7 | import {
     | ^^^^^^^^
>  8 |     approveRevision, rejectRevision,
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>  9 |     approveStaff, rejectStaff,
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 10 |     approveInstitute, rejectInstitute,
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 11 |     approveLab, rejectLab,
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 12 |     approveSecondaryUniversityRequest, rejectSecondaryUniversityRequest
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> 13 | } from '../actions'
     | ^^^^^^^^^^^^^^^^^^^^
  14 | import { SocialStats } from '@/lib/types'
  15 | import { logger } from '@/lib/logger'
  16 |



Import trace:
  App Route:
    ./cofactor-scout/app/admin/dashboard/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/auth/forgot-password/page.tsx:9:1
Module not found: Can't resolve '../actions'
   7 | import Link from 'next/link'
   8 | import { useActionState } from 'react'
>  9 | import { requestPasswordReset } from '../actions'
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  10 |
  11 | const initialState = { error: '', success: '' } as { error?: string; success?: string }
  12 |



Import traces:
  App Route:
    ./cofactor-scout/app/auth/forgot-password/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  Client Component Browser:
    ./cofactor-scout/app/auth/forgot-password/page.tsx [Client Component Browser]
    ./cofactor-scout/app/auth/forgot-password/page.tsx [Server Component]

  Client Component SSR:
    ./cofactor-scout/app/auth/forgot-password/page.tsx [Client Component SSR]
    ./cofactor-scout/app/auth/forgot-password/page.tsx [Server Component]

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/auth/reset-password/page.tsx:9:1
Module not found: Can't resolve '../actions'
   7 | import Link from 'next/link'
   8 | import { useActionState, useState } from 'react'
>  9 | import { resetPassword } from '../actions'
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  10 |
  11 | const initialState = { error: '', success: '' } as { error?: string; success?: string }
  12 |



Import traces:
  App Route:
    ./cofactor-scout/app/auth/reset-password/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  Client Component Browser:
    ./cofactor-scout/app/auth/reset-password/page.tsx [Client Component Browser]
    ./cofactor-scout/app/auth/reset-password/page.tsx [Server Component]

  Client Component SSR:
    ./cofactor-scout/app/auth/reset-password/page.tsx [Client Component SSR]
    ./cofactor-scout/app/auth/reset-password/page.tsx [Server Component]

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/profile/settings/page.tsx:12:1
Module not found: Can't resolve '../settings-actions'
  10 | import { EditProfileForm } from '@/components/features/profile/EditProfileForm'
  11 | import { PublicProfileSettings } from '@/components/features/profile/PublicProfileSettings'
> 12 | import { getInstitutesForUser } from '../settings-actions'
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  13 |
  14 | export const dynamic = 'force-dynamic'
  15 |



Import trace:
  App Route:
    ./cofactor-scout/app/profile/settings/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/components/features/profile/ChangePasswordForm.tsx:7:1
Module not found: Can't resolve '../settings-actions'
   5 | import { Input } from '@/components/ui/input'
   6 | import { Label } from '@/components/ui/label'
>  7 | import { changePassword } from '../settings-actions'
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   8 |
   9 | export function ChangePasswordForm() {
  10 |     const [currentPassword, setCurrentPassword] = useState('')



Import traces:
  App Route:
    ./cofactor-scout/components/features/profile/ChangePasswordForm.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  Server Component:
    ./cofactor-scout/components/features/profile/ChangePasswordForm.tsx
    ./cofactor-scout/app/profile/settings/page.tsx

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/components/features/profile/EditProfileForm.tsx:8:1
Module not found: Can't resolve '../settings-actions'
   6 | import { Label } from '@/components/ui/label'
   7 | import { Textarea } from '@/components/ui/textarea'
>  8 | import { updateUserProfile } from '../settings-actions'
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   9 |
  10 | interface EditProfileFormProps {
  11 |     initialName: string



Import traces:
  App Route:
    ./cofactor-scout/components/features/profile/EditProfileForm.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  Server Component:
    ./cofactor-scout/components/features/profile/EditProfileForm.tsx
    ./cofactor-scout/app/profile/settings/page.tsx

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/components/features/profile/PublicProfileSettings.tsx:9:1
Module not found: Can't resolve '../settings-actions'
   7 | import { Textarea } from '@/components/ui/textarea'
   8 | import { Switch } from '@/components/ui/switch'
>  9 | import { updatePublicProfile, getLabsForInstitute } from '../settings-actions'
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  10 |
  11 | interface Institute {
  12 |     id: string



Import traces:
  App Route:
    ./cofactor-scout/components/features/profile/PublicProfileSettings.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  Server Component:
    ./cofactor-scout/components/features/profile/PublicProfileSettings.tsx
    ./cofactor-scout/app/profile/settings/page.tsx

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/wiki/[slug]/edit/page.tsx:7:1
Module not found: Can't resolve './SubmitButton'
   5 | import { proposeEdit } from '@/actions/wiki.actions'
   6 | import { WikiEditorWrapper } from './WikiEditorWrapper'
>  7 | import { SubmitButton } from './SubmitButton'
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   8 |
   9 | export default async function EditWikiPage({ params, searchParams }: { params: Promise<{ slug: string }>, searchParams: Promise<{ title?: string, universityId?: string, instituteId?: string, labId?: string }> }) {
  10 |     const { slug } = await params



Import trace:
  App Route:
    ./cofactor-scout/app/wiki/[slug]/edit/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/wiki/[slug]/edit/page.tsx:6:1
Module not found: Can't resolve './WikiEditorWrapper'
  4 | import { Label } from '@/components/ui/label'
  5 | import { proposeEdit } from '@/actions/wiki.actions'
> 6 | import { WikiEditorWrapper } from './WikiEditorWrapper'
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  7 | import { SubmitButton } from './SubmitButton'
  8 |
  9 | export default async function EditWikiPage({ params, searchParams }: { params: Promise<{ slug: string }>, searchParams: Promise<{ title?: string, universityId?: string, instituteId?: string, labId?: string }> }) {



Import trace:
  App Route:
    ./cofactor-scout/app/wiki/[slug]/edit/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/lib/utils/search.ts:299:37
Module not found: Can't resolve './cache'
  297 |
  298 |     // Generate a cache key based on query, filters, and user access
> 299 |     const { getOrSetCache } = await import('./cache')
      |                                     ^^^^^^^^^^^^^^^^^
  300 |     const cacheKey = `search:unified:${Buffer.from(query).toString('base64')}:${JSON.stringify(filters)}:${limit}:${allowedUniversityIds ? allowedUniversityIds.sort().join(',') : 'all'}`
  301 |
  302 |     return getOrSetCache(cacheKey, async () => {



Import traces:
  #1 [App Route]:
    ./cofactor-scout/lib/utils/search.ts
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  #2 [App Route]:
    ./cofactor-scout/lib/utils/search.ts
    ./cofactor-scout/app/api/search/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/lib/utils/search.ts:345:37
Module not found: Can't resolve './cache'
  343 |
  344 |     // Cache suggestions with a shorter TTL or same as search
> 345 |     const { getOrSetCache } = await import('./cache')
      |                                     ^^^^^^^^^^^^^^^^^
  346 |     const cacheKey = `search:suggestions:${Buffer.from(query).toString('base64')}:${limit}:${allowedUniversityIds ? allowedUniversityIds.sort().join(',') : 'all'}`
  347 |
  348 |     return getOrSetCache(cacheKey, async () => {



Import traces:
  #1 [App Route]:
    ./cofactor-scout/lib/utils/search.ts
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  #2 [App Route]:
    ./cofactor-scout/lib/utils/search.ts
    ./cofactor-scout/app/api/search/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/wiki/[slug]/page.tsx:106:62
Module not found: Can't resolve '@/app/admin/actions'
  104 |                             <form action={async () => {
  105 |                                 'use server'
> 106 |                                 const { deletePage } = await import('@/app/admin/actions')
      |                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  107 |                                 await deletePage(slug)
  108 |                             }}>
  109 |                                 <Button variant="destructive" size="sm">Delete Page</Button>

Import map: aliased to relative './app/admin/actions' inside of [project]/cofactor-scout


Import trace:
  App Route:
    ./cofactor-scout/app/wiki/[slug]/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/wiki/[slug]/page.tsx:174:58
Module not found: Can't resolve '@/app/admin/actions'
  172 |                         <form action={async () => {
  173 |                             'use server'
> 174 |                             const { deletePage } = await import('@/app/admin/actions')
      |                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  175 |                             await deletePage(slug)
  176 |                         }}>
  177 |                             <Button variant="destructive" size="sm">Delete Page</Button>

Import map: aliased to relative './app/admin/actions' inside of [project]/cofactor-scout


Import trace:
  App Route:
    ./cofactor-scout/app/wiki/[slug]/page.tsx
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/app/api/admin/backups/[filename]/route.ts:3:1
Module not found: Can't resolve '@/lib/auth-config'
  1 | import { NextResponse } from 'next/server';
  2 | import { getServerSession } from 'next-auth';
> 3 | import { authOptions } from '@/lib/auth-config';
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  4 | import fs from 'fs';
  5 | import path from 'path';
  6 |

Import map: aliased to relative './lib/auth-config' inside of [project]/cofactor-scout


Import trace:
  App Route:
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

https://nextjs.org/docs/messages/module-not-found


./cofactor-scout/actions/admin.actions.ts:6:1
Module not found: Can't resolve '@/lib/auth/session/permissions'
  4 | import { revalidatePath } from 'next/cache'
  5 | import { redirect } from 'next/navigation'
> 6 | import { requireAdmin } from '@/lib/auth/session/permissions'
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  7 | import { POWER_SCORE, parseSocialStats, calculateSocialReach } from '@/lib/types'
  8 | import { logger } from '@/lib/logger'
  9 | import { updateReputationAfterModeration, calculateReputation } from '@/lib/moderation/reputation'

Import map: aliased to relative './lib/auth/session/permissions' inside of [project]/cofactor-scout


Import traces:
  App Route:
    ./cofactor-scout/actions/admin.actions.ts
    ./cofactor-scout/app/api/admin/backups/[filename]/route.ts

  Server Component:
    ./cofactor-scout/actions/admin.actions.ts
    ./cofactor-scout/app/admin/revision/[id]/page.tsx

https://nextjs.org/docs/messages/module-not-found


    at <unknown> (./cofactor-scout/app/wiki/[slug]/history/page.tsx:128:82)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/admin/dashboard/page.tsx:7:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/auth/forgot-password/page.tsx:9:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/auth/reset-password/page.tsx:9:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/profile/settings/page.tsx:12:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/components/features/profile/ChangePasswordForm.tsx:7:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/components/features/profile/EditProfileForm.tsx:8:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/components/features/profile/PublicProfileSettings.tsx:9:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/wiki/[slug]/edit/page.tsx:7:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/wiki/[slug]/edit/page.tsx:6:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/lib/utils/search.ts:299:37)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/lib/utils/search.ts:345:37)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/wiki/[slug]/page.tsx:106:62)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/wiki/[slug]/page.tsx:174:58)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/app/api/admin/backups/[filename]/route.ts:3:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
    at <unknown> (./cofactor-scout/actions/admin.actions.ts:6:1)
    at <unknown> (https://nextjs.org/docs/messages/module-not-found)
